<html>
	<import src="/common/base_head.html" title="Login" />
	
	<res src="login.less" type="css" />
	<res src="/common/jquery-3.4.1.min.js" type="js" />
	<res src="/common/sjcl.min.js" type="js" />
	
	<res src="login.js" type="js" />
	
<body>
	<section class="login-wrapper">
		<header class="login-header">
			<h2> 
				<div id="date"></div>
			    <div id="time"></div>
			</h2>
			
		</header>
	
		<div class="login-input_wrapper">
			<input type="text" id="login_username" placeholder="Employee ID"/>
		</div>
		
		<div class="login-input_wrapper">
			<input type="password" id="login_password" placeholder="Password"/>
		</div>
		
		<div class="login-button_wrapper">
			<button onclick="login()" style="background:#42e619">
				Login
			</button>
		</div>
	</section>
	
	<script type="text/javascript">
		function login() {
			// See "https://api.jquery.com/jquery.ajax/" for more details
			$.ajax({
				url: "/pages/login/try_login", // TODO: should be somewhere like: "api/employee/login"
				method: "POST", // use POST or GET
				
				data: {		// JSON Object-data to send to server, if needed
					username: $("#login_username").val(),	// don't worry too much about the jquery here
					password: $("#login_password").val()	// pay attention to the names -- name: value
				},
				
				headers: {	// JSON Object, provide additional HTTP Headers here
					
				}
			})
			// called upon sucessful-response from server
			.done(function(data, status, xhr) {
				// data: response data from server
				// status: response status-message
				// xhr: Javascript XmlHttpRequest Object
				
				alert(data.success ? "Login Passed" : "Login Failed");
				// xhr.status == 200
				// xhr.statusText = "OK"
			
			})
			// called upon error-response from server, or due to transaction-error
			.fail(function(xhr, status, error) {
				// xhr: Javascript XmlHttpRequest Object
				// status: response status-message
				// error: error-message from server
				
				alert("An Error has occured! " + status + " --- " + error);
			});
		}
	</script>
	
	<script>
	//gets date and time and updates every second
		var date = $("#date");
    	var time = $("#time");
    	
    	function update_time(){
    		var uDate = new Date();
    		date.text(uDate.toLocaleDateString());
    		time.text(uDate.toLocaleTimeString());
    	}

   		setInterval(update_time, 1000);
   		update_time();
   		
	</script>
</body>
</html>